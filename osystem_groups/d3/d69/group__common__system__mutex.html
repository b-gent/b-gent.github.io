<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ScummVM API documentation: Mutex handling</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../scummvm_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScummVM API documentation
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/d69/group__common__system__mutex.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mutex handling<div class="ingroups"><a class="el" href="../../db/d78/group__common.html">Common API</a> &raquo; <a class="el" href="../../d1/d0c/group__common__system.html">OSystem</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Historically, the <a class="el" href="../../d2/d38/class_o_system.html">OSystem</a> API used to have a method that allowed creating threads. Hence, mutex support was needed for thread syncing. To ease portability, we decided to remove the threading API. Instead, we now use timers (see setTimerCallback() and Common::Timer). But since those can be implemented using threads (and in fact, that is how our primary backend, the SDL one, does it on many systems), we still must do mutex syncing in our timer callbacks. In addition, the sound mixer uses a mutex in case the backend runs it from a dedicated thread (as the SDL backend does).</p>
<p>Hence, backends that do not use threads to implement the timers can simply use dummy implementations for these methods. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga84988778b36b85a41c43e4f725abdc82"><td class="memItemLeft" align="right" valign="top"><a id="ga84988778b36b85a41c43e4f725abdc82"></a>
typedef struct OpaqueMutex *&#160;</td><td class="memItemRight" valign="bottom"><b>OSystem::MutexRef</b></td></tr>
<tr class="separator:ga84988778b36b85a41c43e4f725abdc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1388ff244feacf131328f3a46b9e547a"><td class="memItemLeft" align="right" valign="top">virtual MutexRef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d69/group__common__system__mutex.html#ga1388ff244feacf131328f3a46b9e547a">OSystem::createMutex</a> ()=0</td></tr>
<tr class="separator:ga1388ff244feacf131328f3a46b9e547a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa947578a48433b04888ce975f1bcfe9b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d69/group__common__system__mutex.html#gaa947578a48433b04888ce975f1bcfe9b">OSystem::lockMutex</a> (MutexRef mutex)=0</td></tr>
<tr class="separator:gaa947578a48433b04888ce975f1bcfe9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9e47355fde10e8cfcb4a8b0d05af84e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d69/group__common__system__mutex.html#gab9e47355fde10e8cfcb4a8b0d05af84e">OSystem::unlockMutex</a> (MutexRef mutex)=0</td></tr>
<tr class="separator:gab9e47355fde10e8cfcb4a8b0d05af84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49791b494012e627668412a5da576a86"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d69/group__common__system__mutex.html#ga49791b494012e627668412a5da576a86">OSystem::deleteMutex</a> (MutexRef mutex)=0</td></tr>
<tr class="separator:ga49791b494012e627668412a5da576a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1388ff244feacf131328f3a46b9e547a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1388ff244feacf131328f3a46b9e547a">&#9670;&nbsp;</a></span>createMutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual MutexRef OSystem::createMutex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new mutex.</p>
<dl class="section return"><dt>Returns</dt><dd>The newly created mutex, or 0 if an error occurred. </dd></dl>

</div>
</div>
<a id="gaa947578a48433b04888ce975f1bcfe9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa947578a48433b04888ce975f1bcfe9b">&#9670;&nbsp;</a></span>lockMutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void OSystem::lockMutex </td>
          <td>(</td>
          <td class="paramtype">MutexRef&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lock the given mutex.</p>
<dl class="section note"><dt>Note</dt><dd>ScummVM code assumes that the mutex implementation supports recursive locking. That is, a thread can lock a mutex twice without deadlocking. In case of a multilock, the mutex must be unlocked as many times as it was locked befored it really becomes unlocked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>The mutex to lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab9e47355fde10e8cfcb4a8b0d05af84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9e47355fde10e8cfcb4a8b0d05af84e">&#9670;&nbsp;</a></span>unlockMutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void OSystem::unlockMutex </td>
          <td>(</td>
          <td class="paramtype">MutexRef&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unlock the given mutex.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>The mutex to unlock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga49791b494012e627668412a5da576a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49791b494012e627668412a5da576a86">&#9670;&nbsp;</a></span>deleteMutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void OSystem::deleteMutex </td>
          <td>(</td>
          <td class="paramtype">MutexRef&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delete the given mutex.</p>
<p>Make sure the mutex is unlocked before you delete it. If you delete a locked mutex, the behavior is undefined. In particular, your program may crash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>The mutex to delete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
