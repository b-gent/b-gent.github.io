

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Type 2 Tag &mdash; nrfxlib 1.3.99 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/js/ncs.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/nrfxlib.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Type 4 Tag" href="type_4_tag.html" />
    <link rel="prev" title="Integration notes" href="integration_notes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../README.html" class="icon icon-home"> nrfxlib
          

          
          </a>

          
            
            
              <div class="version">
                1.3.99
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Libraries:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../bsdlib/README.html">BSD library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/README.html">Crypto Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mpsl/README.html">Multiprotocol Service Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf_security/README.html">Nordic Security Module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">Near Field Communication (NFC)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration_notes.html">Integration notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Type 2 Tag</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memory-layout">Memory layout</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-reserved">Static reserved</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-lock-and-reserved-bytes">Dynamic Lock and Reserved bytes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#command-set">Command set</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#read-command-format">READ command format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#programming-a-tag">Programming a tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-documentation">API documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type_4_tag.html">Type 4 Tag</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../openthread/README.html">OpenThread pre-built libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../softdevice_controller/README.html">SoftDevice Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zboss/README.html">ZBOSS Zigbee stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf_rpc/README.html">Remote procedure call library (nRF RPC)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../README.html">nrfxlib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../README.html">Docs</a> &raquo;</li>
        
          <li><a href="../README.html">Near Field Communication (NFC)</a> &raquo;</li>
        
      <li>Type 2 Tag</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/nfc/doc/type_2_tag.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="type-2-tag">
<span id="id1"></span><h1>Type 2 Tag<a class="headerlink" href="#type-2-tag" title="Permalink to this headline">¶</a></h1>
<p>The Type 2 Tag implementation is based on the NFC Forum document <em>Type 2 Tag Technical Specification Version 1.0</em>.</p>
<p>A Type 2 Tag can be read and re-written, and the memory of the tag can be write protected.
The Type 2 Tag library implements a Type 2 Tag in read-only state.
Read only means that the memory of the tag is write protected and cannot be erased (formatted) or re-written by the polling device.</p>
<p>If you use the supplied library, you do not need to know about the actual <a class="reference internal" href="#t2t-memory-layout"><span class="std std-ref">Memory layout</span></a> that is used to implement the tag.
You can just follow the steps outlined in <a class="reference internal" href="#t2t-programming"><span class="std std-ref">Programming a tag</span></a> to configure the tag data.</p>
<div class="section" id="memory-layout">
<span id="t2t-memory-layout"></span><h2>Memory layout<a class="headerlink" href="#memory-layout" title="Permalink to this headline">¶</a></h2>
<p>This information is not required to program the NFC tag; you can just follow the steps outlined in <a class="reference internal" href="#t2t-programming"><span class="std std-ref">Programming a tag</span></a>.</p>
<p>The NFCT data is stored in RAM, in the same way as data for other nRF52 peripherals.
The data format that is implemented by this library is compliant to the Dynamic Memory Structure defined in the NFC Forum document <em>Type 2 Tag Technical Specification Version 1.0 2017-08-28 [T2T]</em>.</p>
<p>The Type 2 Tag memory has a size of 1024 bytes.
It is organized in the following way:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Block Number</p></th>
<th class="head"><p>Byte0</p></th>
<th class="head"><p>Byte1</p></th>
<th class="head"><p>Byte2</p></th>
<th class="head"><p>Byte3</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Internal 0</p></td>
<td><p>Internal 1</p></td>
<td><p>Internal 2</p></td>
<td><p>Internal 3</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Internal 4</p></td>
<td><p>Internal 5</p></td>
<td><p>Internal 6</p></td>
<td><p>Internal 7</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Internal 8</p></td>
<td><p>Internal 9</p></td>
<td><p>Lock 0</p></td>
<td><p>Lock 1</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>CC 0</p></td>
<td><p>CC 1</p></td>
<td><p>CC 2</p></td>
<td><p>CC 3</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Data 0</p></td>
<td><p>Data 1</p></td>
<td><p>Data 2</p></td>
<td><p>Data 3</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Data 4</p></td>
<td><p>Data 5</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data 46</p></td>
<td><p>Data 47</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>Data 48</p></td>
<td><p>Data 49</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-odd"><td><p>251</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Data 991</p></td>
<td><p>Data</p></td>
</tr>
<tr class="row-even"><td><p>252</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
</tr>
<tr class="row-odd"><td><p>253</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
</tr>
<tr class="row-even"><td><p>254</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>Lock</p></td>
</tr>
<tr class="row-odd"><td><p>255</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Lock</p></td>
<td><p>Rsvd</p></td>
<td><p>Lock</p></td>
</tr>
</tbody>
</table>
<p>There are three block types:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#static-reserved">Static reserved</a> (16 bytes)</p></li>
<li><p><a class="reference internal" href="#data">Data</a> (992 bytes)</p></li>
<li><p><a class="reference internal" href="#dynamic-lock-and-reserved-bytes">Dynamic Lock and Reserved bytes</a> (16 bytes)</p></li>
</ul>
<div class="section" id="static-reserved">
<h3>Static reserved<a class="headerlink" href="#static-reserved" title="Permalink to this headline">¶</a></h3>
<p>The static reserved bytes contain 10 internal bytes, 2 lock bytes, and 4 Capability Container bytes.</p>
<div class="section" id="internal-bytes">
<h4>Internal bytes<a class="headerlink" href="#internal-bytes" title="Permalink to this headline">¶</a></h4>
<p>The internal bytes depend on the UID length.
They are set according to the following table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Byte number</p></th>
<th class="head"><p>4-byte UID</p></th>
<th class="head"><p>7-byte UID</p></th>
<th class="head"><p>10-byte UID</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Internal0</p></td>
<td><p>UID0</p></td>
<td><p>UID0</p></td>
<td><p>UID0</p></td>
</tr>
<tr class="row-odd"><td><p>Internal1</p></td>
<td><p>UID1</p></td>
<td><p>UID1</p></td>
<td><p>UID1</p></td>
</tr>
<tr class="row-even"><td><p>Internal2</p></td>
<td><p>UID2</p></td>
<td><p>UID2</p></td>
<td><p>UID2</p></td>
</tr>
<tr class="row-odd"><td><p>Internal3</p></td>
<td><p>UID3</p></td>
<td><p>BCC0 = CT ^ UID0 ^ UID1 ^ UID2</p></td>
<td><p>UID3</p></td>
</tr>
<tr class="row-even"><td><p>Internal4</p></td>
<td><p>BCC0 = UID0 ^ UID1 ^ UID2 ^ UID3</p></td>
<td><p>UID3</p></td>
<td><p>UID4</p></td>
</tr>
<tr class="row-odd"><td><p>Internal5</p></td>
<td><p>0xFF</p></td>
<td><p>UID4</p></td>
<td><p>UID5</p></td>
</tr>
<tr class="row-even"><td><p>Internal6</p></td>
<td><p>0xFF</p></td>
<td><p>UID5</p></td>
<td><p>UID6</p></td>
</tr>
<tr class="row-odd"><td><p>Internal7</p></td>
<td><p>0xFF</p></td>
<td><p>UID6</p></td>
<td><p>UID7</p></td>
</tr>
<tr class="row-even"><td><p>Internal8</p></td>
<td><p>0xFF</p></td>
<td><p>BCC1 = UID3 ^ UID4 ^ UID5 ^ UID6</p></td>
<td><p>UID8</p></td>
</tr>
<tr class="row-odd"><td><p>Internal9</p></td>
<td><p>NFC Lib version</p></td>
<td><p>NFC Lib version</p></td>
<td><p>UID9</p></td>
</tr>
</tbody>
</table>
<p>UID0 contains the manufacturer ID for Nordic Semiconductor and equals 0x5F.</p>
<p>CT stands for Cascade Tag byte and equals 0x88.</p>
<p>The UID bytes are stored in the nRF52 FICR registers.</p>
<p>If you want to use UID bytes other than the ones from the FICR registers, use the <a class="reference internal" href="api.html#_CPPv421nfc_t2t_parameter_set16nfc_t2t_param_idPv6size_t" title="nfc_t2t_parameter_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">nfc_t2t_parameter_set()</span></code></a> function with the <a class="reference internal" href="api.html#_CPPv4N11nfc_t2t_lib20NFC_T2T_PARAM_NFCID1E" title="nfc_t2t_lib::NFC_T2T_PARAM_NFCID1"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">NFC_T2T_PARAM_NFCID1</span></code></a> parameter.
When choosing a custom UID, remember to follow the NFC Forum requirements.</p>
</div>
<div class="section" id="static-lock-bytes">
<h4>Static Lock bytes<a class="headerlink" href="#static-lock-bytes" title="Permalink to this headline">¶</a></h4>
<p>Both Static Lock bytes (Lock 0 and Lock 1) are set to 0xFF, which means that the CC area and the first 48 bytes of the data area of the tag can only be read, not written.</p>
</div>
<div class="section" id="cc-bytes">
<h4>CC bytes<a class="headerlink" href="#cc-bytes" title="Permalink to this headline">¶</a></h4>
<p>The Capability Container bytes (CC 0 - CC 3) are encoded as described in Section 4.6 of the Type 2 Tag Technical Specification.
They cannot be used for storing application data.
See the following table for the values of the CC bytes:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>CC Byte Number</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CC0</p></td>
<td><p>NFC magic number</p></td>
<td><p>0xE1</p></td>
</tr>
<tr class="row-odd"><td><p>CC1</p></td>
<td><p>Document version number (v1.0)</p></td>
<td><p>0x10</p></td>
</tr>
<tr class="row-even"><td><p>CC2</p></td>
<td><p>Size of data area (992 bytes / 8)</p></td>
<td><p>0x7C</p></td>
</tr>
<tr class="row-odd"><td><p>CC3</p></td>
<td><p>R/W access (read only)</p></td>
<td><p>0x0F</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p>Application data is organized in TLV blocks.
The data area can contain one or more TVL blocks, up to a maximum data size of 992 bytes.</p>
<p>A TLV block contains the following fields:</p>
<ul class="simple">
<li><p><strong>T</strong> (required): block type</p></li>
<li><p><strong>L</strong> (optional, depending on the T value): block length in number of bytes (field length if present: 1 or 3 bytes)</p></li>
<li><p><strong>V</strong> (optional, depending on the T and L values): block value (present only if the L field is present and greater than 0), multibyte field with length equal to L field value</p></li>
</ul>
<p>The following block types are defined:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>TLV block name</p></th>
<th class="head"><p>Value of T field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NULL TLV</p></td>
<td><p>0x00</p></td>
<td><p>Can be used for padding of memory areas.
The NFC Forum Device shall ignore this.</p></td>
</tr>
<tr class="row-odd"><td><p>Lock Control TLV</p></td>
<td><p>0x01</p></td>
<td><p>Defines details of the lock bits.</p></td>
</tr>
<tr class="row-even"><td><p>Memory Control TLV</p></td>
<td><p>0x02</p></td>
<td><p>Identifies reserved memory areas.</p></td>
</tr>
<tr class="row-odd"><td><p>NDEF Message TLV</p></td>
<td><p>0x03</p></td>
<td><p>Contains an NDEF message.</p></td>
</tr>
<tr class="row-even"><td><p>Proprietary TLV</p></td>
<td><p>0xFD</p></td>
<td><p>Contains tag proprietary information.</p></td>
</tr>
<tr class="row-odd"><td><p>Terminator TLV</p></td>
<td><p>0xFE</p></td>
<td><p>Contains the last TLV block in the data area.</p></td>
</tr>
</tbody>
</table>
<p>To write data to the tag, use the Type 2 Tag library functions <a class="reference internal" href="api.html#_CPPv419nfc_t2t_payload_setPK7uint8_t6size_t" title="nfc_t2t_payload_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">nfc_t2t_payload_set()</span></code></a> or <a class="reference internal" href="api.html#_CPPv423nfc_t2t_payload_raw_setPK7uint8_t6size_t" title="nfc_t2t_payload_raw_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">nfc_t2t_payload_raw_set()</span></code></a>.
<a class="reference internal" href="api.html#_CPPv419nfc_t2t_payload_setPK7uint8_t6size_t" title="nfc_t2t_payload_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">nfc_t2t_payload_set()</span></code></a> configures a single NDEF TLV block based on a user-provided NDEF message.
<a class="reference internal" href="api.html#_CPPv423nfc_t2t_payload_raw_setPK7uint8_t6size_t" title="nfc_t2t_payload_raw_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">nfc_t2t_payload_raw_set()</span></code></a> does not configure a TLV block, but the provided data must be organized in a TLV structure.</p>
</div>
<div class="section" id="dynamic-lock-and-reserved-bytes">
<h3>Dynamic Lock and Reserved bytes<a class="headerlink" href="#dynamic-lock-and-reserved-bytes" title="Permalink to this headline">¶</a></h3>
<p>15 Dynamic Lock bytes are located after the data area. Each bit defines access conditions of 8 consecutive bytes of the tag data area, except for the first 48 bytes, whose access conditions are defined by <a class="reference internal" href="#static-lock-bytes">Static Lock bytes</a>.
The Dynamic Lock bits are set to 1 to indicate that the tag is read-only.</p>
<p>The lock bytes are followed by 1 reserved byte (Rsvd) to get a multiple of 8 bytes.</p>
</div>
</div>
<div class="section" id="command-set">
<span id="t2t-command-set"></span><h2>Command set<a class="headerlink" href="#command-set" title="Permalink to this headline">¶</a></h2>
<p>The current version of the Type 2 Tag library supports only one Type 2 Tag command type: the READ command.
When a READ command is received, the tag responds with the data that is stored for the tag.</p>
<div class="section" id="read-command-format">
<h3>READ command format<a class="headerlink" href="#read-command-format" title="Permalink to this headline">¶</a></h3>
<p>The READ command has the following format:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Byte number</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Code</p></td>
<td><p>0x30</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Number of the 4-byte data block to read from the tag data</p></td>
<td><p>0x00 - 0xFF</p></td>
</tr>
</tbody>
</table>
<p>The library can send either a READ response (success) or a NACK response (failure):</p>
<ul class="simple">
<li><p>A READ response contains the content of 4 data blocks starting with the requested data block (16 bytes).</p></li>
<li><p>A NACK response contains the error code 0x0, 0x1, 0x4, or 0x5 (4 bits).</p></li>
</ul>
</div>
</div>
<div class="section" id="programming-a-tag">
<span id="t2t-programming"></span><h2>Programming a tag<a class="headerlink" href="#programming-a-tag" title="Permalink to this headline">¶</a></h2>
<p>To program a tag, complete the following steps:</p>
<ol class="arabic">
<li><p>Implement a callback function that handles events from the Type 2 Tag library and register it:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
<span class="cm">/* Callback for NFC events */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">nfc_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span> <span class="n">context</span><span class="p">,</span>
                         <span class="k">enum</span> <span class="n">nfc_t4t_event</span> <span class="n">event</span><span class="p">,</span>
                         <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">data</span><span class="p">,</span>
                         <span class="kt">size_t</span> <span class="n">data_length</span><span class="p">,</span>
                         <span class="kt">uint32_t</span> <span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">...</span>
<span class="p">}</span>
<span class="cm">/* Set up NFC and register application callback for NFC events. */</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">nfc_t2t_setup</span><span class="p">(</span><span class="n">nfc_callback</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">printk</span><span class="p">(</span><span class="s">&quot;Cannot setup NFC T2T library!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
          <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Configure the data for the tag.
You can provide the data as NDEF message (recommended, see <a class="reference external" href="../..\..\nrf\ug_nfc.html#ug-nfc-ndef" title="(in nRF Connect SDK v1.3.99)"><span>NFC Data Exchange Format (NDEF)</span></a>) or as a raw TLV structure (advanced usage, see Type 2 Tag <a class="reference internal" href="#t2t-memory-layout"><span class="std std-ref">Memory layout</span></a>).</p>
<ul>
<li><p>Set an NDEF message:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span> <span class="n">ndef_msg_buf</span><span class="p">[]</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// Buffer with the user NDEF message</span>
<span class="kt">uint32_t</span> <span class="n">len</span>           <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ndef_msg_buf</span><span class="p">);</span>
<span class="cm">/* Set created message as the NFC payload. */</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">nfc_t2t_payload_set</span><span class="p">(</span><span class="n">ndef_msg_buf</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printk</span><span class="p">(</span><span class="s">&quot;Cannot set payload!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Alternatively, set a TLV structure:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span> <span class="n">tlv_buf</span><span class="p">[]</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// Buffer with the user TLV structure</span>
<span class="kt">uint32_t</span> <span class="n">len</span>           <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">tlv_buf</span><span class="p">);</span>
<span class="cm">/* Set created TLV structure as the NFC payload. */</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">nfc_t2t_payload_raw_set</span><span class="p">(</span><span class="n">tlv_buf</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printk</span><span class="p">(</span><span class="s">&quot;Cannot set raw payload!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Activate the NFC tag so that it starts sensing and reacts when an NFC field is detected:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Start sensing NFC field. */</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">nfc_t2t_emulation_start</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">printk</span><span class="p">(</span><span class="s">&quot;Cannot start emulation!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
     <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="api-documentation">
<span id="nfc-api-type2"></span><h2>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<dl class="group">
<dt>
<span class="target" id="group__nfc__t2t__lib"></span><em>group</em> <code class="sig-name descname">nfc_t2t_lib</code></dt>
<dd><p>The T2T emulation library interface. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="macro">
<dt id="c.NFC_T2T_SIZEOF_INTERNAL_BYTES">
<span class="target" id="group__nfc__t2t__lib_1ga0fa4ee5ccc9e2d49af8b6ba027e19295"></span><code class="sig-name descname">NFC_T2T_SIZEOF_INTERNAL_BYTES</code><a class="headerlink" href="#c.NFC_T2T_SIZEOF_INTERNAL_BYTES" title="Permalink to this definition">¶</a></dt>
<dd><p>T2T internal byte size. </p>
</dd></dl>

<dl class="macro">
<dt id="c.NFC_T2T_MAX_PAYLOAD_SIZE">
<span class="target" id="group__nfc__t2t__lib_1ga2989f7ecc43f6247df1f80b806d525fb"></span><code class="sig-name descname">NFC_T2T_MAX_PAYLOAD_SIZE</code><a class="headerlink" href="#c.NFC_T2T_MAX_PAYLOAD_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum NDEF message size. No NDEF-TLV and no implicit lock bytes at the end. </p>
</dd></dl>

<dl class="macro">
<dt id="c.NFC_T2T_MAX_PAYLOAD_SIZE_RAW">
<span class="target" id="group__nfc__t2t__lib_1gac4df25abb8e5ba7268ed618c83d6de39"></span><code class="sig-name descname">NFC_T2T_MAX_PAYLOAD_SIZE_RAW</code><a class="headerlink" href="#c.NFC_T2T_MAX_PAYLOAD_SIZE_RAW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Typedefs</p>
<dl class="type">
<dt id="_CPPv418nfc_t2t_callback_t">
<span id="_CPPv318nfc_t2t_callback_t"></span><span id="_CPPv218nfc_t2t_callback_t"></span><span id="nfc_t2t_callback_t"></span><span class="target" id="group__nfc__t2t__lib_1ga0964b28fa729da7936a5bccf7d5dd432"></span><em class="property">typedef </em>void (*<code class="sig-name descname">nfc_t2t_callback_t</code>)<span class="sig-paren">(</span>void *context, <em class="property">enum</em> nfc_t2t_event event, <em class="property">const</em> uint8_t *data, size_t data_length<span class="sig-paren">)</span><br /></dt>
<dd><p>Callback to pass events from NFC T2T Library to application. </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">context</span></code>: Application context for callback execution. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">event</span></code>: The event that occurred. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Data to send to the application (event specific). </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_length</span></code>: Length of the data. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Enums</p>
<dl class="enum">
<dt id="_CPPv4N11nfc_t2t_lib13nfc_t2t_eventE">
<span id="_CPPv3N11nfc_t2t_lib13nfc_t2t_eventE"></span><span id="_CPPv2N11nfc_t2t_lib13nfc_t2t_eventE"></span><span class="target" id="group__nfc__t2t__lib_1gab07ae44dddc843a5420fde3c79dfc349"></span><em class="property">enum </em><code class="sig-name descname">nfc_t2t_event</code><br /></dt>
<dd><p>Events passed to the callback function. </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib18NFC_T2T_EVENT_NONEE">
<span id="_CPPv3N11nfc_t2t_lib18NFC_T2T_EVENT_NONEE"></span><span id="_CPPv2N11nfc_t2t_lib18NFC_T2T_EVENT_NONEE"></span><span class="target" id="group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349aad86b27594da9b26103ae6a1c7b87676"></span><code class="sig-name descname">NFC_T2T_EVENT_NONE</code><br /></dt>
<dd><p>Not used. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib22NFC_T2T_EVENT_FIELD_ONE">
<span id="_CPPv3N11nfc_t2t_lib22NFC_T2T_EVENT_FIELD_ONE"></span><span id="_CPPv2N11nfc_t2t_lib22NFC_T2T_EVENT_FIELD_ONE"></span><span class="target" id="group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a27893fa4969cf3402ab138b652923a01"></span><code class="sig-name descname">NFC_T2T_EVENT_FIELD_ON</code><br /></dt>
<dd><p>NFC tag has detected external NFC field and was selected by an NFC polling device. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib23NFC_T2T_EVENT_FIELD_OFFE">
<span id="_CPPv3N11nfc_t2t_lib23NFC_T2T_EVENT_FIELD_OFFE"></span><span id="_CPPv2N11nfc_t2t_lib23NFC_T2T_EVENT_FIELD_OFFE"></span><span class="target" id="group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a2c0011cd699e65067d6daa8b9e31afbf"></span><code class="sig-name descname">NFC_T2T_EVENT_FIELD_OFF</code><br /></dt>
<dd><p>External NFC field has been removed. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib23NFC_T2T_EVENT_DATA_READE">
<span id="_CPPv3N11nfc_t2t_lib23NFC_T2T_EVENT_DATA_READE"></span><span id="_CPPv2N11nfc_t2t_lib23NFC_T2T_EVENT_DATA_READE"></span><span class="target" id="group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a213a35dc10db468350e09b060612854c"></span><code class="sig-name descname">NFC_T2T_EVENT_DATA_READ</code><br /></dt>
<dd><p>NFC polling device has read all tag data. Repeated reading in the same session i.e. before <a class="reference internal" href="#group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a2c0011cd699e65067d6daa8b9e31afbf"><span class="std std-ref">NFC_T2T_EVENT_FIELD_OFF</span></a> event, will not trigger another <a class="reference internal" href="#group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a213a35dc10db468350e09b060612854c"><span class="std std-ref">NFC_T2T_EVENT_DATA_READ</span></a> event. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib21NFC_T2T_EVENT_STOPPEDE">
<span id="_CPPv3N11nfc_t2t_lib21NFC_T2T_EVENT_STOPPEDE"></span><span id="_CPPv2N11nfc_t2t_lib21NFC_T2T_EVENT_STOPPEDE"></span><span class="target" id="group__nfc__t2t__lib_gab07ae44dddc843a5420fde3c79dfc349_1ggab07ae44dddc843a5420fde3c79dfc349a6ce996bfcf4c9375c7490f13309df157"></span><code class="sig-name descname">NFC_T2T_EVENT_STOPPED</code><br /></dt>
<dd><p>Reference to the application NFC callback has been released using nfc_t2t_done. </p>
</dd></dl>

</dd></dl>

<dl class="enum">
<dt id="_CPPv4N11nfc_t2t_lib16nfc_t2t_param_idE">
<span id="_CPPv3N11nfc_t2t_lib16nfc_t2t_param_idE"></span><span id="_CPPv2N11nfc_t2t_lib16nfc_t2t_param_idE"></span><span class="target" id="group__nfc__t2t__lib_1gad63693d088fdebc1b3ea6de159def3e1"></span><em class="property">enum </em><code class="sig-name descname">nfc_t2t_param_id</code><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib21NFC_T2T_PARAM_TESTINGE">
<span id="_CPPv3N11nfc_t2t_lib21NFC_T2T_PARAM_TESTINGE"></span><span id="_CPPv2N11nfc_t2t_lib21NFC_T2T_PARAM_TESTINGE"></span><span class="target" id="group__nfc__t2t__lib_gad63693d088fdebc1b3ea6de159def3e1_1ggad63693d088fdebc1b3ea6de159def3e1a51542fb8738834aea1f84be09ae36ed7"></span><code class="sig-name descname">NFC_T2T_PARAM_TESTING</code><br /></dt>
<dd><p>Used for unit tests. </p>
</dd></dl>

<dl class="enumerator">
<dt id="_CPPv4N11nfc_t2t_lib20NFC_T2T_PARAM_NFCID1E">
<span id="_CPPv3N11nfc_t2t_lib20NFC_T2T_PARAM_NFCID1E"></span><span id="_CPPv2N11nfc_t2t_lib20NFC_T2T_PARAM_NFCID1E"></span><span class="target" id="group__nfc__t2t__lib_gad63693d088fdebc1b3ea6de159def3e1_1ggad63693d088fdebc1b3ea6de159def3e1a0b48ed1abfe717204216f7a9ec5dd725"></span><code class="sig-name descname">NFC_T2T_PARAM_NFCID1</code><br /></dt>
<dd><p>NFCID1 value, data can be 4, 7, or 10 bytes long (single, double, or triple size). To use default NFCID1 of specific length pass one byte containing requested length. Default 7-byte NFCID1 will be used if this parameter was not set. This parameter can be set before nfc_t2t_setup() to set initial NFCID1 and it can be changed later. </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="_CPPv413nfc_t2t_setup18nfc_t2t_callback_tPv">
<span id="_CPPv313nfc_t2t_setup18nfc_t2t_callback_tPv"></span><span id="_CPPv213nfc_t2t_setup18nfc_t2t_callback_tPv"></span><span id="nfc_t2t_setup__nfc_t2t_callback_t.voidP"></span><span class="target" id="group__nfc__t2t__lib_1ga89274e84da408991ea1b61d1dad492a7"></span>int <code class="sig-name descname">nfc_t2t_setup</code><span class="sig-paren">(</span><a class="reference internal" href="api.html#_CPPv418nfc_t2t_callback_t" title="nfc_t2t_callback_t">nfc_t2t_callback_t</a> <em>callback</em>, void *<em>context</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for registering the application callback for event signaling. </p>
<p>The callback will be called by NFC T2T Library to notify the application of relevant events. It will be called from the HAL_NFC callback context.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">callback</span></code>: Function pointer to the callback. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">context</span></code>: Pointer to a memory area used by the callback for execution (optional).</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: If the application callback was registered successfully. If one of the arguments was invalid, an error code is returned. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv421nfc_t2t_parameter_set16nfc_t2t_param_idPv6size_t">
<span id="_CPPv321nfc_t2t_parameter_set16nfc_t2t_param_idPv6size_t"></span><span id="_CPPv221nfc_t2t_parameter_set16nfc_t2t_param_idPv6size_t"></span><span id="nfc_t2t_parameter_set__nfc_t2t_param_id.voidP.s"></span><span class="target" id="group__nfc__t2t__lib_1ga68061ba2986a02e9000cb15d705a76b0"></span>int <code class="sig-name descname">nfc_t2t_parameter_set</code><span class="sig-paren">(</span><em class="property">enum</em> nfc_t2t_param_id <em>id</em>, void *<em>data</em>, size_t <em>data_length</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for setting an NFC parameter. </p>
<p>This function allows to set an NFC configuration parameter.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: ID of the parameter to set. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Pointer to a buffer containing the data to set. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_length</span></code>: Size of the buffer containing the data to set.</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Zero</span></code>: on success or (negative) error code otherwise. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv421nfc_t2t_parameter_get16nfc_t2t_param_idPvP6size_t">
<span id="_CPPv321nfc_t2t_parameter_get16nfc_t2t_param_idPvP6size_t"></span><span id="_CPPv221nfc_t2t_parameter_get16nfc_t2t_param_idPvP6size_t"></span><span id="nfc_t2t_parameter_get__nfc_t2t_param_id.voidP.sP"></span><span class="target" id="group__nfc__t2t__lib_1ga36d155629cd7374419431956d2b6cf3c"></span>int <code class="sig-name descname">nfc_t2t_parameter_get</code><span class="sig-paren">(</span><em class="property">enum</em> nfc_t2t_param_id <em>id</em>, void *<em>data</em>, size_t *<em>max_data_length</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for querying an NFC parameter value. </p>
<p>The queried value will be placed into the passed data buffer. If the buffer is too small, max_data_length will contain the required buffer size. If the buffer is big enough, max_data_length will contain the actual size of the data.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: ID of the parameter to query. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Pointer to a buffer receiving the queried data. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_data_length</span></code>: Size of the buffer, receives actual size of queried data.</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Zero</span></code>: on success or (negative) error code otherwise. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv419nfc_t2t_payload_setPK7uint8_t6size_t">
<span id="_CPPv319nfc_t2t_payload_setPK7uint8_t6size_t"></span><span id="_CPPv219nfc_t2t_payload_setPK7uint8_t6size_t"></span><span id="nfc_t2t_payload_set__uint8_tCP.s"></span><span class="target" id="group__nfc__t2t__lib_1gacb2b2e3dd09c169edb4d8333567b4706"></span>int <code class="sig-name descname">nfc_t2t_payload_set</code><span class="sig-paren">(</span><em class="property">const</em> uint8_t *<em>payload</em>, size_t <em>payload_length</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for registering the payload to send on reception of a READ request. </p>
<p>The payload is considered to only contain the NDEF message to deliver to a reader. The required NDEF TLV will be created implicitly by NFC T2T Library.</p>
<p>The pointer to the payload must stay valid for the duration of the library execution, or until it is explicitly released.</p>
<p>If the pointer is not NULL, but the length is zero, the paypload is considered to be an empty NDEF message.</p>
<p>If a new payload is registered, the previously registered one is considered released.</p>
<p>Passing a NULL pointer releases the current payload without registering a new one.</p>
<p>If an invalid size is given (too big), the function returns with an error and the currently registered payload is left unchanged.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Provided pointer must point to RAM region.</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">payload</span></code>: Pointer to the memory area in RAM containing the payload to send. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">payload_length</span></code>: Size of the payload in bytes.</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Zero</span></code>: on success or (negative) error code otherwise. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv423nfc_t2t_payload_raw_setPK7uint8_t6size_t">
<span id="_CPPv323nfc_t2t_payload_raw_setPK7uint8_t6size_t"></span><span id="_CPPv223nfc_t2t_payload_raw_setPK7uint8_t6size_t"></span><span id="nfc_t2t_payload_raw_set__uint8_tCP.s"></span><span class="target" id="group__nfc__t2t__lib_1ga1f2541b2307751e4cd030a6b47497178"></span>int <code class="sig-name descname">nfc_t2t_payload_raw_set</code><span class="sig-paren">(</span><em class="property">const</em> uint8_t *<em>payload</em>, size_t <em>payload_length</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for registering the raw payload to send on reception of a READ request. </p>
<p>The payload will be delivered directly as-is to the reader, without implicitly adding an NDEF TLV container. This can be used if the application wants to define the TLVs itself, for example, to provide a different memory layout.</p>
<p>The pointer to the payload must stay valid for the duration of the library execution, or until it is explicitly released.</p>
<p>If a new payload is registered, the previously registered one is considered released.</p>
<p>Passing a NULL pointer releases the current payload, without registering a new one.</p>
<p>If an invalid size is given (too big), the function returns with an error and the currently registered payload is left unchanged.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Provided pointer must points to RAM region.</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">payload</span></code>: Pointer to the memory area in RAM containing the payload to send. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">payload_length</span></code>: Size of the payload in bytes.</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: If the operation was successful. If one of the arguments was invalid, an error code is returned. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv420nfc_t2t_internal_setPK7uint8_t6size_t">
<span id="_CPPv320nfc_t2t_internal_setPK7uint8_t6size_t"></span><span id="_CPPv220nfc_t2t_internal_setPK7uint8_t6size_t"></span><span id="nfc_t2t_internal_set__uint8_tCP.s"></span><span class="target" id="group__nfc__t2t__lib_1gab63f30a97a07cd5f1c3bb264fac6b7ab"></span>int <code class="sig-name descname">nfc_t2t_internal_set</code><span class="sig-paren">(</span><em class="property">const</em> uint8_t *<em>data</em>, size_t <em>data_length</em><span class="sig-paren">)</span><br /></dt>
<dd><p>Function for registering the sequence of internal bytes. </p>
<p>This refers to the first 10 bytes of the tag memory. The library will set a sensible default for these bytes. The application can use this function to override the default.</p>
<p>Passing a NULL pointer reverts back to the default sequence. The data will be copied by NFC T2T Library, so the memory does not have to remain valid after the function returns.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>When modifying the internal bytes, remember that they must be consistent with the NFC hardware register settings</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Pointer to the memory area containing the data. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_length</span></code>: Size of the data in bytes.</p></li>
</ul>
</dd>
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: If the operation was successful. If the data was not NULL and the data length was not 10, an error code is returned. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv423nfc_t2t_emulation_startv">
<span id="_CPPv323nfc_t2t_emulation_startv"></span><span id="_CPPv223nfc_t2t_emulation_startv"></span><span id="nfc_t2t_emulation_start__void"></span><span class="target" id="group__nfc__t2t__lib_1gac5d21b7acb24e53fc2d6096a37085180"></span>int <code class="sig-name descname">nfc_t2t_emulation_start</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><br /></dt>
<dd><p>Function for activating the NFC frontend. </p>
<p>You must call this function so that events are posted to the application callback.</p>
<p><dl class="simple">
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: If the NFC frontend was activated successfully. If the lower layer could not be started, an error code is returned. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv422nfc_t2t_emulation_stopv">
<span id="_CPPv322nfc_t2t_emulation_stopv"></span><span id="_CPPv222nfc_t2t_emulation_stopv"></span><span id="nfc_t2t_emulation_stop__void"></span><span class="target" id="group__nfc__t2t__lib_1ga91b8f960fbe0540928ef49d21764ffb6"></span>int <code class="sig-name descname">nfc_t2t_emulation_stop</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><br /></dt>
<dd><p>Function for deactivating the NFC frontend. </p>
<p>After calling this function, no more events will be posted to the application callback.</p>
<p><dl class="simple">
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: If the NFC frontend was deactivated successfully. If the lower layer could not be stopped, an error code is returned. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv412nfc_t2t_donev">
<span id="_CPPv312nfc_t2t_donev"></span><span id="_CPPv212nfc_t2t_donev"></span><span id="nfc_t2t_done__void"></span><span class="target" id="group__nfc__t2t__lib_1gafcd5dd2548086ac88a8b96260e81d869"></span>int <code class="sig-name descname">nfc_t2t_done</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><br /></dt>
<dd><p>Function for releasing the reference to the application callback. </p>
<p>After calling this function, the passed callback pointer is no longer considered valid.</p>
<p><dl class="simple">
<dt><strong>Return Value</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: This function always succeeds. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="type_4_tag.html" class="btn btn-neutral float-right" title="Type 4 Tag" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="integration_notes.html" class="btn btn-neutral" title="Integration notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2020, Nordic Semiconductor.
      Last updated on Sep 30, 2020.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic.svg" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nrfxlib</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr</a><br/>
      </div>
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>