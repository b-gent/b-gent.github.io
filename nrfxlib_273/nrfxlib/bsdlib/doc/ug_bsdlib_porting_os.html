

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Porting the BSD library to your OS &mdash; nrfxlib 1.3.99 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/js/ncs.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/nrfxlib.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Changelog" href="CHANGELOG.html" />
    <link rel="prev" title="GNSS socket" href="gnss_extension.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../README.html" class="icon icon-home"> nrfxlib
          

          
          </a>

          
            
            
              <div class="version">
                1.3.99
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Libraries:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">BSD library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="supported_features.html">Supported features</a></li>
<li class="toctree-l2"><a class="reference internal" href="limitations.html">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Library architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="security_tags.html">Security tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html">BSD socket extensions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Porting the BSD library to your OS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-os-abstraction-layer">Creating the OS abstraction layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-init">bsd_os_init</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-timedwait">bsd_os_timedwait</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-errno-set">bsd_os_errno_set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-application-irq-clear">bsd_os_application_irq_clear</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-application-irq-set">bsd_os_application_irq_set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-trace-irq-clear">bsd_os_trace_irq_clear</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-trace-irq-set">bsd_os_trace_irq_set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-trace-put">bsd_os_trace_put</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-application-irq-handler">bsd_os_application_irq_handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bsd-os-trace-irq-handler">bsd_os_trace_irq_handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-scenarios-to-handle-in-bsd-os-c">Other scenarios to handle in bsd_os.c</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memory">Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peripheral-requirements">Peripheral requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-sequence-diagrams">Message sequence diagrams</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference-template-for-the-bsd-os-c-file">Reference template for the bsd_os.c file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/README.html">Crypto Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mpsl/README.html">Multiprotocol Service Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf_security/README.html">Nordic Security Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nfc/README.html">Near Field Communication (NFC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openthread/README.html">OpenThread pre-built libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../softdevice_controller/README.html">SoftDevice Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zboss/README.html">ZBOSS Zigbee stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nrf_rpc/README.html">Remote procedure call library (nRF RPC)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../README.html">nrfxlib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../README.html">Docs</a> &raquo;</li>
        
          <li><a href="../README.html">BSD library</a> &raquo;</li>
        
      <li>Porting the BSD library to your OS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/bsdlib/doc/ug_bsdlib_porting_os.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="porting-the-bsd-library-to-your-os">
<span id="bsdlib-ug-porting"></span><h1>Porting the BSD library to your OS<a class="headerlink" href="#porting-the-bsd-library-to-your-os" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../README.html#bsdlib"><span class="std std-ref">BSD library</span></a> from Nordic Semiconductor is an OS-agnostic C library.
OS-specific parts are moved out of the library.
To use the library with your OS or scheduler, you must first port it by creating a custom <code class="file docutils literal notranslate"><span class="pre">bsd_os.c</span></code> file, which serves as an OS abstraction layer.
The library exposes a <code class="file docutils literal notranslate"><span class="pre">bsd_os.h</span></code> header file that defines the functions that must be implemented in <code class="file docutils literal notranslate"><span class="pre">bsd_os.c</span></code>.
The header file also exposes what functions are provided by the library that the OS integration module must interface with.</p>
<p>The following diagram presents the BSD OS abstraction layer.
Arrows indicate that the elements can communicate with each other directly.</p>
<div class="figure align-default" id="id1">
<img alt="BSD OS abstraction overview" src="../../_images/bsd_lib_layers.svg" /><p class="caption"><span class="caption-text">BSD OS abstraction overview</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="creating-the-os-abstraction-layer">
<h2>Creating the OS abstraction layer<a class="headerlink" href="#creating-the-os-abstraction-layer" title="Permalink to this headline">¶</a></h2>
<p>To create a BSD OS abstraction layer, you must implement a number of functions in the <code class="file docutils literal notranslate"><span class="pre">bsd_os.c</span></code> file.</p>
<div class="section" id="bsd-os-init">
<h3>bsd_os_init<a class="headerlink" href="#bsd-os-init" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when the application has issued <code class="docutils literal notranslate"><span class="pre">bsd_init()</span></code>.
It is responsible for preparing IRQ for low priority BSD scheduling and trace scheduling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When working with an application based on Zephyr, set the IRQs to a low priority (6 or 7) and enable them before exiting the function.</p>
</div>
<p>The function must also initialize timers and threads (if there is a context that needs a time-out).
If Nordic Proprietary trace is enabled, the medium for where to forward the trace must also be configured in this function.</p>
<p><em>Required actions</em>:</p>
<ul class="simple">
<li><p>Initialize timers/threads.</p></li>
<li><p>Configure low priority BSD scheduling IRQ (SoftIRQ).</p></li>
<li><p>Configure low priority trace scheduling IRQ (SoftIRQ).</p></li>
<li><p>Configure medium for trace (UART/SPI etc.).</p></li>
</ul>
</div>
<div class="section" id="bsd-os-timedwait">
<h3>bsd_os_timedwait<a class="headerlink" href="#bsd-os-timedwait" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when a timed context or sleep is required.
A blind return value of 0 will make all BSD library operations always blocking.</p>
<p><em>Required actions</em> to make the operations non-blocking:</p>
<ul class="simple">
<li><p>Start counting the time (this can be based on a Timer or Thread for instance).</p></li>
<li><p>Report back the remaining time of the timer if the specific timer is interrupted.</p></li>
<li><p>If timed out, report NRF_ETIMEDOUT.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-errno-set">
<h3>bsd_os_errno_set<a class="headerlink" href="#bsd-os-errno-set" title="Permalink to this headline">¶</a></h3>
<p>This function translates errno’s from the BSD library to the OS-defined ones.</p>
<p><em>Required action</em>:</p>
<ul class="simple">
<li><p>Implement a translation for each errno set by the BSD library.
If it overlaps with your OS errno, translation is not needed.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-application-irq-clear">
<h3>bsd_os_application_irq_clear<a class="headerlink" href="#bsd-os-application-irq-clear" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when the library wants to clear IRQ on the low priority BSD library scheduling IRQ.</p>
<p><em>Required action</em>:</p>
<ul class="simple">
<li><p>Clear the low priority BSD library scheduling IRQ using OS primitives or NVIC functions.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-application-irq-set">
<h3>bsd_os_application_irq_set<a class="headerlink" href="#bsd-os-application-irq-set" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when the library wants to set a pending IRQ on the low priority BSD library scheduling IRQ.</p>
<p><em>Required action</em>:</p>
<ul class="simple">
<li><p>Set a pending IRQ on the low priority BSD library scheduling IRQ using OS primitives or NVIC functions.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-trace-irq-clear">
<h3>bsd_os_trace_irq_clear<a class="headerlink" href="#bsd-os-trace-irq-clear" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when the library wants to clear IRQ on the low priority trace scheduling IRQ.</p>
<p><em>Required action</em>:</p>
<ul class="simple">
<li><p>Clear the low priority trace scheduling IRQ using OS primitives or NVIC functions.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-trace-irq-set">
<h3>bsd_os_trace_irq_set<a class="headerlink" href="#bsd-os-trace-irq-set" title="Permalink to this headline">¶</a></h3>
<p>This function is called by the BSD library when the library wants to set a pending IRQ on the low priority trace scheduling IRQ.</p>
<p><em>Required action</em>:</p>
<ul class="simple">
<li><p>Set a pending IRQ on the low priority trace scheduling IRQ using OS primitives or NVIC functions.</p></li>
</ul>
</div>
<div class="section" id="bsd-os-trace-put">
<h3>bsd_os_trace_put<a class="headerlink" href="#bsd-os-trace-put" title="Permalink to this headline">¶</a></h3>
<p>This function puts the trace string to the desired medium, typically UART.
However, the medium used to forward and store the traces is up to the implementation and must be initialized correctly before used.
If you are not interested in traces, they can be ignored and this function can be empty and simply return.</p>
</div>
<div class="section" id="bsd-os-application-irq-handler">
<h3>bsd_os_application_irq_handler<a class="headerlink" href="#bsd-os-application-irq-handler" title="Permalink to this headline">¶</a></h3>
<p>This function is implemented in the BSD library and must be called upon the low priority BSD library IRQ handler, triggered by the <a class="reference internal" href="api.html#_CPPv426bsd_os_application_irq_setv" title="bsd_os_application_irq_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bsd_os_application_irq_set()</span></code></a> function.</p>
</div>
<div class="section" id="bsd-os-trace-irq-handler">
<h3>bsd_os_trace_irq_handler<a class="headerlink" href="#bsd-os-trace-irq-handler" title="Permalink to this headline">¶</a></h3>
<p>This function is implemented in the BSD library and must be called upon the low priority trace IRQ handler, triggered by the <a class="reference internal" href="api.html#_CPPv420bsd_os_trace_irq_setv" title="bsd_os_trace_irq_set"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bsd_os_trace_irq_set()</span></code></a> function.</p>
</div>
<div class="section" id="other-scenarios-to-handle-in-bsd-os-c">
<h3>Other scenarios to handle in bsd_os.c<a class="headerlink" href="#other-scenarios-to-handle-in-bsd-os-c" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>In case the OS has its own IRQ handler scheme, not directly forwarding the IPC_IRQHandler to the BSD library, this must be routed by the OS.
The OS must call IPC_IRQHandler() upon all IRQs with IRQ number IPC_IRQn.</p></li>
<li><p>In <code class="file docutils literal notranslate"><span class="pre">bsd_os.c</span></code>, you can configure a desired medium for forwarding trace data upon <a class="reference internal" href="api.html#_CPPv416bsd_os_trace_putPCK7uint8_t8uint32_t" title="bsd_os_trace_put"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">bsd_os_trace_put()</span></code></a> calls .</p></li>
</ol>
</div>
</div>
<div class="section" id="memory">
<h2>Memory<a class="headerlink" href="#memory" title="Permalink to this headline">¶</a></h2>
<p>The BSD library must have a region of absolute positioned RAM.
The region must be configured as non-secure RAM by the secure application.
The starting address of this region must be 0x20010000, and the size of the block is 0xC020 bytes.</p>
<p>The secure domain memory is divided into segments of 8 KB RAM blocks.
Because the size of the BSD library block is 0xC020 bytes, it is not aligned to full 8 KB blocks.
It occupies six blocks and a small part of a seventh block.</p>
<p>The leftover memory in that seventh block (8160 bytes, starting at address 0x2001 c020) is configured as non-secure, but it can be used by the application.</p>
<p>The following RAM overview diagram shows where in the sequential RAM the BSD library must be positioned, and also indicates the important memory position values. The dotted lines represent 8 KB memory blocks. Note that the BSD library occupies more than six full blocks.</p>
<div class="figure align-default" id="id2">
<img alt="BSD library memory overview" src="../../_images/bsd_lib_memory.svg" /><p class="caption"><span class="caption-text">BSD library memory overview</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="peripheral-requirements">
<h2>Peripheral requirements<a class="headerlink" href="#peripheral-requirements" title="Permalink to this headline">¶</a></h2>
<p>As the BSD library has been compiled to operate on peripherals in the non-secure domain, the following two peripherals must be configured to be non-secure:</p>
<ul class="simple">
<li><p>NRF_IPC</p></li>
<li><p>NRF_POWER</p></li>
</ul>
<p>If you are using the hard-float variant of the BSD library, the FPU must be activated in both the secure domain and the non-secure domain, and must be configured to allow the non-secure application to run FPU instructions.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">nrfx/mdk/system_nrf9160.c</span></code> file provides a template on how to configure the FPU in both cases.
The system file also provides several Errata workarounds specific to the chip variant used, which are needed for any secure domain application.</p>
</div>
<div class="section" id="message-sequence-diagrams">
<h2>Message sequence diagrams<a class="headerlink" href="#message-sequence-diagrams" title="Permalink to this headline">¶</a></h2>
<p>The following message sequence diagrams show the interactions between the application, BSD library, and the OS.</p>
<ol class="arabic simple">
<li><p>Sequence of the initialization of the BSD library.
Configuration of the high and low priority IRQs:</p></li>
</ol>
<div class="figure align-default" id="id3">
<img alt="Initialization (main thread)" src="../../_images/msc_init.png" />
<p class="caption"><span class="caption-text">Initialization (main thread)</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="2">
<li><p>Handling an event sent from the BSD library to a lower priority to be able to receive new events:</p></li>
</ol>
<div class="figure align-default" id="id4">
<img alt="Event handling, lowering priority" src="../../_images/msc_event.png" />
<p class="caption"><span class="caption-text">Event handling, lowering priority</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="3">
<li><p>Handling traces:</p></li>
</ol>
<div class="figure align-default" id="id5">
<img alt="Trace handling, lowering priority" src="../../_images/msc_trace.png" />
<p class="caption"><span class="caption-text">Trace handling, lowering priority</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple" start="4">
<li><p>Handling a time-out or sleep:</p></li>
</ol>
<div class="figure align-default" id="id6">
<img alt="Timers" src="../../_images/msc_timers.png" />
<p class="caption"><span class="caption-text">Timers</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="reference-template-for-the-bsd-os-c-file">
<h2>Reference template for the bsd_os.c file<a class="headerlink" href="#reference-template-for-the-bsd-os-c-file" title="Permalink to this headline">¶</a></h2>
<p>The following code snippet shows a simple implementation of the BSD OS abstraction layer.
You can use it as a template and customize it for your OS or scheduler.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;bsd_os.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;nrf_errno.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;bsd_platform.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;bsd_limits.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;nrf.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;errno.h&quot;</span><span class="cp"></span>

<span class="cp">#define BSD_OS_TRACE_IRQ          EGU2_IRQn</span>
<span class="cp">#define BSD_OS_TRACE_IRQ_PRIORITY 6</span>
<span class="cp">#define BSD_OS_TRACE_IRQ_HANDLER  EGU2_IRQHandler</span>

<span class="kt">void</span> <span class="nf">read_task_create</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// The read task is achieved using SW interrupt.</span>
    <span class="n">NVIC_SetPriority</span><span class="p">(</span><span class="n">BSD_APPLICATION_IRQ</span><span class="p">,</span> <span class="n">BSD_APPLICATION_IRQ_PRIORITY</span><span class="p">);</span>
    <span class="n">NVIC_ClearPendingIRQ</span><span class="p">(</span><span class="n">BSD_APPLICATION_IRQ</span><span class="p">);</span>
    <span class="n">NVIC_EnableIRQ</span><span class="p">(</span><span class="n">BSD_APPLICATION_IRQ</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">trace_task_create</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NVIC_SetPriority</span><span class="p">(</span><span class="n">BSD_OS_TRACE_IRQ</span><span class="p">,</span> <span class="n">BSD_OS_TRACE_IRQ_PRIORITY</span><span class="p">);</span>
    <span class="n">NVIC_ClearPendingIRQ</span><span class="p">(</span><span class="n">BSD_OS_TRACE_IRQ</span><span class="p">);</span>
    <span class="n">NVIC_EnableIRQ</span><span class="p">(</span><span class="n">BSD_OS_TRACE_IRQ</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bsd_os_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">read_task_create</span><span class="p">();</span>
    <span class="n">trace_task_create</span><span class="p">();</span>
    <span class="c1">// Initialize timers / sleeping threads used in the bsd_os_timedwait function.</span>
    <span class="c1">// Initialize trace medium used in the bsd_os_trace_put function.</span>
<span class="p">}</span>

<span class="kt">int32_t</span> <span class="nf">bsd_os_timedwait</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">context</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="o">*</span> <span class="n">timeout</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Return remaining time by reference in timeout parameter,</span>
    <span class="c1">// if not yet timed out.</span>
    <span class="c1">// Else return NRF_ETIMEDOUT if timeout has triggered.</span>
    <span class="c1">// A blind return value of 0 will make all BSD library operations</span>
    <span class="c1">// always block.</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bsd_os_errno_set</span><span class="p">(</span><span class="kt">int</span> <span class="n">errno_val</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Translate nrf_errno.h errno to the OS specific value.</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bsd_os_application_irq_set</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NVIC_SetPendingIRQ</span><span class="p">(</span><span class="n">BSD_APPLICATION_IRQ</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="nf">bsd_os_application_irq_clear</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NVIC_ClearPendingIRQ</span><span class="p">(</span><span class="n">BSD_APPLICATION_IRQ</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">BSD_APPLICATION_IRQ_HANDLER</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">bsd_os_application_irq_handler</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bsd_os_trace_irq_set</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NVIC_SetPendingIRQ</span><span class="p">(</span><span class="n">BSD_OS_TRACE_IRQ</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">bsd_os_trace_irq_clear</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NVIC_ClearPendingIRQ</span><span class="p">(</span><span class="n">BSD_OS_TRACE_IRQ</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">BSD_OS_TRACE_IRQ_HANDLER</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">bsd_os_trace_irq_handler</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">int32_t</span> <span class="nf">bsd_os_trace_put</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span> <span class="k">const</span> <span class="n">p_buffer</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">buf_len</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Store buffer to chosen medium.</span>
    <span class="c1">// Traces can be dropped if not needed.</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CHANGELOG.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gnss_extension.html" class="btn btn-neutral" title="GNSS socket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2020, Nordic Semiconductor.
      Last updated on Sep 30, 2020.

    </p>
</td>
<td id="nordiclogo">
  <a href="https://www.nordicsemi.com/"><img src="../../_static/images/nordic.svg" border="0"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> nrfxlib</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <div class="rst-other-version ncs">
        <a href="../../../nrf/index.html">nRF Connect SDK</a>
      </div>
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr</a><br/>
      </div>
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>